<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Draw</title>
    <style type="text/css">
        #viewport {
            display: inline-block;
            width: 900px;
            height: 500px;
            margin: 0;
            padding: 0;
            box-sizing:border-box;
            -moz-box-sizing:border-box;
            -webkit-box-sizing:border-box;
        }
        #view {
            pointer-events: all;
            background: #00bbdd;
            width: 900px;
            height: 500px;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>

<div id="coords"></div>

<div id="viewport">
<svg id="view" height="500" width="900" onmousemove="getCoords(event)" onclick="click(event)"></svg>
</div>

<script>
    function setCursorByID(id, cursorStyle) {
        var elem;
        if (
            document.getElementById &&
            (elem=document.getElementById(id))
        ) {
            if (elem.style) elem.style.cursor = cursorStyle;
        }
    }
    setCursorByID('view', 'crosshair');    const maxX = 900, maxY = 500;
    var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    var svgNS = svg.namespaceURI;    drawing = [];
    count = 0;
    var selected = false;

    function click(event) {
        myProps = document.getElementById('view').getBoundingClientRect();
        var x = (event.clientX - myProps.left).toFixed();
        var y = (event.clientY - myProps.top).toFixed();
        document.getElementById('coords').innerHTML = 'objects=' + count + ', x=' + x + ', y=' + y;
        if (selected) {
            selected = false;
            drawing[count].setAttributeNS(null, 'x2', x);
            drawing[count].setAttributeNS(null, 'y2', y);
            count++
        } else {
            selected = true;
            drawing[count] = document.createElementNS(svgNS, 'line');
            drawing[count].setAttributeNS(null, "stroke", "black");
            drawing[count].setAttributeNS(null, "stroke-width", 2);
            drawing[count].setAttributeNS(null, 'x1', x);
            drawing[count].setAttributeNS(null, 'y1', y);
            drawing[count].setAttributeNS(null, 'x2', x);
            drawing[count].setAttributeNS(null, 'y2', y);
            document.getElementById('view').appendChild(drawing[count]);
        }
    }

    function getCoords(event) {
        myProps = document.getElementById('view').getBoundingClientRect();
        var x = (event.clientX - myProps.left).toFixed();
        var y = (event.clientY - myProps.top).toFixed();
        document.getElementById('coords').innerHTML = 'objects=' + count + ', x=' + x + ', y=' + y;
        if (selected) {
            if (drawing[count]) {
                drawing[count].setAttributeNS(null, 'x2', x);
                drawing[count].setAttributeNS(null, 'y2', y)
            }
        }
    }

</script>
</body>
</html>
